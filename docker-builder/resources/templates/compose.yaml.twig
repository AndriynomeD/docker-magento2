#
# {{generated_by_builder}}
#
#version: "3.9"
services:
{% include "compose/compose.varnish.yaml.twig" %}
{% include "compose/compose.nginx.yaml.twig" %}
{% include "compose/compose.fpm.yaml.twig" %}
{% include "compose/compose.db.yaml.twig" %}
{% include "compose/compose.cli.yaml.twig" %}
{% include "compose/compose.cron.yaml.twig" %}
{% include "compose/compose.mcs.yaml.twig" %}
{% include "compose/compose.search_engine.internal.yaml.twig" %}
{% include "compose/compose.redis.yaml.twig" %}
{% include "compose/compose.rabbitmq.yaml.twig" %}
{% include "compose/compose.newrelic-infra.yaml.twig" %}
networks:
  nginx-proxy:
    external: true
  databases:
    external: true
{% if DOCKER_SERVICES.search_engine and DOCKER_SERVICES.search_engine.CONNECT_TYPE == 'external' %}
  search-engine-net:
    external: true
{% endif %}
  mail-services:
    external: true
{% if DOCKER_SERVICES.newrelic and DOCKER_SERVICES.newrelic.enabled %}
  newrelic-net:
      external: true
{% endif %}